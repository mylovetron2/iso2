<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch·ª©c nƒÉng: NH·∫¨P PHI·∫æU Y√äU C·∫¶U D·ªäCH V·ª§</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1500px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.3em;
            opacity: 0.95;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 45px;
            animation: fadeIn 0.6s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section-title {
            font-size: 2em;
            color: #f5576c;
            margin-bottom: 25px;
            padding-bottom: 12px;
            border-bottom: 4px solid #f093fb;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .icon {
            font-size: 1.3em;
        }
        
        .info-box {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            padding: 25px;
            border-radius: 12px;
            border-left: 6px solid #f5576c;
            margin-bottom: 25px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .info-box-blue {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-left-color: #2196f3;
        }
        
        .info-box-green {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border-left-color: #4caf50;
        }
        
        .workflow {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 25px;
        }
        
        .workflow-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            border: 3px solid #f093fb;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .workflow-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
        
        .workflow-number {
            position: absolute;
            top: -20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5em;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        
        .workflow-title {
            font-size: 1.3em;
            color: #f5576c;
            margin-top: 20px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .workflow-desc {
            color: #555;
            line-height: 1.8;
        }
        
        .field-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        .field-list-title {
            font-weight: 600;
            color: #f5576c;
            margin-bottom: 10px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        thead {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }
        
        th {
            padding: 18px;
            text-align: left;
            font-weight: 600;
            font-size: 1em;
        }
        
        td {
            padding: 15px 18px;
            border-bottom: 1px solid #e9ecef;
        }
        
        tbody tr:hover {
            background-color: #ffecd2;
            transition: background-color 0.3s ease;
        }
        
        tbody tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .validation-rules {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #ff9800;
            margin-top: 20px;
        }
        
        .validation-rules li {
            padding: 8px 0;
            border-bottom: 1px dashed #ddd;
        }
        
        .validation-rules li:last-child {
            border-bottom: none;
        }
        
        .code-block {
            background: #263238;
            color: #aed581;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        
        .highlight {
            background: #ffeb3b;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
            color: #333;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 5px 5px 5px 0;
        }
        
        .badge-primary {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .badge-success {
            background: #e8f5e9;
            color: #2e7d32;
        }
        
        .badge-warning {
            background: #fff3e0;
            color: #e65100;
        }
        
        .badge-danger {
            background: #ffebee;
            color: #c62828;
        }
        
        .screenshot {
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            display: block;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }
        
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #f5576c;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        
        .feature-card h4 {
            color: #f5576c;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .footer {
            background: #f8f9fa;
            padding: 25px;
            text-align: center;
            color: #666;
            border-top: 2px solid #dee2e6;
        }
        
        ul.checklist {
            list-style: none;
            padding: 0;
        }
        
        ul.checklist li {
            padding: 10px 15px;
            margin: 8px 0;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #4caf50;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        ul.checklist li:before {
            content: "‚úì";
            color: #4caf50;
            font-weight: bold;
            margin-right: 10px;
            font-size: 1.2em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìã NH·∫¨P PHI·∫æU Y√äU C·∫¶U D·ªäCH V·ª§</h1>
            <p>Ch·ª©c nƒÉng ti·∫øp nh·∫≠n y√™u c·∫ßu s·ª≠a ch·ªØa/b·∫£o d∆∞·ª°ng t·ª´ kh√°ch h√†ng</p>
        </div>
        
        <div class="content">
            <!-- T·ªïng quan -->
            <section class="section">
                <h2 class="section-title"><span class="icon">üéØ</span> T·ªïng Quan Ch·ª©c NƒÉng</h2>
                <div class="info-box">
                    <p><strong>M·ª•c ƒë√≠ch:</strong> Ti·∫øp nh·∫≠n v√† t·∫°o phi·∫øu y√™u c·∫ßu d·ªãch v·ª• s·ª≠a ch·ªØa/b·∫£o d∆∞·ª°ng thi·∫øt b·ªã t·ª´ kh√°ch h√†ng (c√°c ƒë∆°n v·ªã/x√≠ nghi·ªáp).</p>
                    <p style="margin-top: 10px;"><strong>File th·ª±c thi:</strong> formsc.php (ch·ª©c nƒÉng: phieuscbd)</p>
                    <p style="margin-top: 10px;"><strong>Vai tr√≤:</strong> ƒêi·ªÉm b·∫Øt ƒë·∫ßu c·ªßa quy tr√¨nh s·ª≠a ch·ªØa/b·∫£o d∆∞·ª°ng thi·∫øt b·ªã</p>
                </div>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>‚è±Ô∏è T·ª± ƒë·ªông h√≥a</h4>
                        <p>T·ª± ƒë·ªông sinh s·ªë phi·∫øu, m√£ qu·∫£n l√Ω, ng√†y t·∫°o phi·∫øu</p>
                    </div>
                    <div class="feature-card">
                        <h4>üîó Li√™n k·∫øt d·ªØ li·ªáu</h4>
                        <p>T√≠ch h·ª£p v·ªõi danh m·ª•c thi·∫øt b·ªã, ƒë∆°n v·ªã, v·ªã tr√≠</p>
                    </div>
                    <div class="feature-card">
                        <h4>‚úÖ Ki·ªÉm tra nghi·ªáp v·ª•</h4>
                        <p>Validate thi·∫øt b·ªã ch∆∞a ho√†n th√†nh ƒë∆°n h√†ng c≈©</p>
                    </div>
                    <div class="feature-card">
                        <h4>üìä Theo d√µi</h4>
                        <p>L∆∞u l·ªãch s·ª≠ v√† IP ng∆∞·ªùi t·∫°o phi·∫øu</p>
                    </div>
                </div>
            </section>
            
            <!-- Quy tr√¨nh -->
            <section class="section">
                <h2 class="section-title"><span class="icon">üîÑ</span> Quy Tr√¨nh Nghi·ªáp V·ª•</h2>
                
                <div class="workflow">
                    <div class="workflow-card">
                        <div class="workflow-number">1</div>
                        <div class="workflow-title">Th√¥ng tin c∆° b·∫£n</div>
                        <div class="workflow-desc">
                            H·ªá th·ªëng t·ª± ƒë·ªông sinh <span class="highlight">s·ªë phi·∫øu</span> (4 ch·ªØ s·ªë, t·ª± tƒÉng).
                            Nh·∫≠p ng√†y, ch·ªçn ƒë∆°n v·ªã y√™u c·∫ßu t·ª´ dropdown.
                        </div>
                        <div class="field-list">
                            <div class="field-list-title">Tr∆∞·ªùng d·ªØ li·ªáu:</div>
                            ‚Ä¢ phieu (auto): 0001, 0002, 0003...<br>
                            ‚Ä¢ ngayyc: Ng√†y y√™u c·∫ßu<br>
                            ‚Ä¢ madv: M√£ ƒë∆°n v·ªã (t·ª´ donvi_iso)<br>
                            ‚Ä¢ khachhang: Ng∆∞·ªùi y√™u c·∫ßu<br>
                            ‚Ä¢ dienthoai: SƒêT li√™n h·ªá<br>
                            ‚Ä¢ nhanvien: NV x∆∞·ªüng ti·∫øp nh·∫≠n
                        </div>
                    </div>
                    
                    <div class="workflow-card">
                        <div class="workflow-number">2</div>
                        <div class="workflow-title">Ch·ªçn thi·∫øt b·ªã</div>
                        <div class="workflow-desc">
                            Ch·ªçn t·ªëi ƒëa <span class="highlight">5 thi·∫øt b·ªã</span> c·∫ßn s·ª≠a ch·ªØa/b·∫£o d∆∞·ª°ng.
                            Dropdown thi·∫øt b·ªã l·ªçc theo ƒë∆°n v·ªã ƒë√£ ch·ªçn.
                        </div>
                        <div class="field-list">
                            <div class="field-list-title">Tr∆∞·ªùng d·ªØ li·ªáu (x5):</div>
                            ‚Ä¢ thietbi[1-5]: M√£ v·∫≠t t∆∞ (mavt)<br>
                            ‚Ä¢ somay[1-5]: Serial number<br>
                            ‚Ä¢ model[1-5]: Model thi·∫øt b·ªã<br>
                            ‚Ä¢ tinhtrang[1-5]: T√¨nh tr·∫°ng k·ªπ thu·∫≠t<br>
                            ‚Ä¢ yeucau[1-5]: N·ªôi dung y√™u c·∫ßu<br>
                            ‚Ä¢ vitri[1-5]: V·ªã tr√≠ m√°y v·ªÅ x∆∞·ªüng
                        </div>
                    </div>
                    
                    <div class="workflow-card">
                        <div class="workflow-number">3</div>
                        <div class="workflow-title">Th√¥ng tin b·ªï sung</div>
                        <div class="workflow-desc">
                            Nh·∫≠p th√¥ng tin v·ªÅ v·ªã tr√≠ l√†m vi·ªác c·ªßa thi·∫øt b·ªã (ƒë·∫∑c th√π ng√†nh d·∫ßu kh√≠).
                        </div>
                        <div class="field-list">
                            <div class="field-list-title">Tr∆∞·ªùng d·ªØ li·ªáu:</div>
                            ‚Ä¢ ycthemkh: Y√™u c·∫ßu kh√°c<br>
                            ‚Ä¢ xemxetxuong: Nh·∫≠n x√©t x∆∞·ªüng<br>
                            ‚Ä¢ lo: L√¥ khai th√°c<br>
                            ‚Ä¢ mo: M·ªè d·∫ßu kh√≠<br>
                            ‚Ä¢ gieng: Gi·∫øng khoan
                        </div>
                    </div>
                    
                    <div class="workflow-card">
                        <div class="workflow-number">4</div>
                        <div class="workflow-title">Ki·ªÉm tra & L∆∞u</div>
                        <div class="workflow-desc">
                            H·ªá th·ªëng ki·ªÉm tra thi·∫øt b·ªã c√≥ ƒë∆°n h√†ng ƒëang ch·ªù hay kh√¥ng (bg=0).
                            N·∫øu h·ª£p l·ªá, l∆∞u v√†o <code>hososcbd_iso</code>.
                        </div>
                        <div class="field-list">
                            <div class="field-list-title">Validation:</div>
                            ‚úì S·ªë phi·∫øu ch∆∞a t·ªìn t·∫°i<br>
                            ‚úì Thi·∫øt b·ªã ƒë√£ b√†n giao (bg=1)<br>
                            ‚úì √çt nh·∫•t 1 thi·∫øt b·ªã ƒë∆∞·ª£c ch·ªçn<br>
                            ‚úì ƒê∆°n v·ªã h·ª£p l·ªá
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- C·∫•u tr√∫c form -->
            <section class="section">
                <h2 class="section-title"><span class="icon">üìù</span> C·∫•u Tr√∫c Form Nh·∫≠p Li·ªáu</h2>
                
                <table>
                    <thead>
                        <tr>
                            <th style="width: 25%;">Nh√≥m tr∆∞·ªùng</th>
                            <th style="width: 35%;">C√°c tr∆∞·ªùng</th>
                            <th style="width: 20%;">Ki·ªÉu input</th>
                            <th style="width: 20%;">Ghi ch√∫</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Th√¥ng tin phi·∫øu</strong></td>
                            <td>
                                ‚Ä¢ sohoso (phieu)<br>
                                ‚Ä¢ ngay (ngayyc)<br>
                                ‚Ä¢ donvi (madv)
                            </td>
                            <td>
                                ‚Ä¢ Text (readonly)<br>
                                ‚Ä¢ Date picker<br>
                                ‚Ä¢ Select dropdown
                            </td>
                            <td>
                                Auto-increment<br>
                                Default h√¥m nay<br>
                                T·ª´ b·∫£ng donvi_iso
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Th√¥ng tin kh√°ch h√†ng</strong></td>
                            <td>
                                ‚Ä¢ khachhang (ngyeucau)<br>
                                ‚Ä¢ dienthoai<br>
                                ‚Ä¢ nhanvien (ngnhyeucau)
                            </td>
                            <td>
                                ‚Ä¢ Text input<br>
                                ‚Ä¢ Text input<br>
                                ‚Ä¢ Text input
                            </td>
                            <td>
                                T√™n ng∆∞·ªùi y√™u c·∫ßu<br>
                                SƒêT li√™n h·ªá<br>
                                NV ti·∫øp nh·∫≠n
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Danh s√°ch thi·∫øt b·ªã</strong><br>(L·∫∑p 5 l·∫ßn)</td>
                            <td>
                                ‚Ä¢ thietbi[i] (mavt)<br>
                                ‚Ä¢ somay[i]<br>
                                ‚Ä¢ tinhtrang[i] (ttktbefore)<br>
                                ‚Ä¢ yeucau[i] (cv)<br>
                                ‚Ä¢ vitri[i] (vitrimaybd)
                            </td>
                            <td>
                                ‚Ä¢ Select (mavt.model)<br>
                                ‚Ä¢ Select dropdown<br>
                                ‚Ä¢ Text input<br>
                                ‚Ä¢ Text input<br>
                                ‚Ä¢ Select dropdown
                            </td>
                            <td>
                                T·ª´ thietbi_iso<br>
                                Theo mavt+model<br>
                                T√¨nh tr·∫°ng hi·ªán t·∫°i<br>
                                C√¥ng vi·ªác y√™u c·∫ßu<br>
                                T·ª´ vitri_iso
                            </td>
                        </tr>
                        <tr>
                            <td><strong>Th√¥ng tin b·ªï sung</strong></td>
                            <td>
                                ‚Ä¢ ycthemkh<br>
                                ‚Ä¢ xemxetxuong<br>
                                ‚Ä¢ lo, mo, gieng
                            </td>
                            <td>
                                ‚Ä¢ Text input<br>
                                ‚Ä¢ Text input<br>
                                ‚Ä¢ Select dropdowns
                            </td>
                            <td>
                                Y√™u c·∫ßu kh√°c<br>
                                Nh·∫≠n x√©t x∆∞·ªüng<br>
                                V·ªã tr√≠ gi·∫øng khoan
                            </td>
                        </tr>
                    </tbody>
                </table>
            </section>
            
            <!-- X·ª≠ l√Ω backend -->
            <section class="section">
                <h2 class="section-title"><span class="icon">‚öôÔ∏è</span> X·ª≠ L√Ω Backend</h2>
                
                <div class="info-box info-box-blue">
                    <h3 style="margin-bottom: 15px; color: #1976d2;">üìå Sinh s·ªë phi·∫øu t·ª± ƒë·ªông</h3>
                    <div class="code-block">
SELECT MAX(phieu) FROM hososcbd_iso;<br>
// K·∫øt qu·∫£: 0125<br>
$maxphieu++; // = 126<br>
if ($maxphieu <= 9) $fieu = "000" . $maxphieu; // 0001-0009<br>
else if ($maxphieu <= 99) $fieu = "00" . $maxphieu; // 0010-0099<br>
else if ($maxphieu <= 999) $fieu = "0" . $maxphieu; // 0100-0999<br>
else $fieu = $maxphieu; // 1000+
                    </div>
                </div>
                
                <div class="info-box info-box-green">
                    <h3 style="margin-bottom: 15px; color: #2e7d32;">üìå Sinh m√£ qu·∫£n l√Ω (maql)</h3>
                    <div class="code-block">
$maql = "$nams$thangs$ngays-$donvi-$sohoso-N" . $i;<br>
// V√≠ d·ª•: 20251121-XDT-0126-N1<br>
// Format: YYYYMMDD-MADV-SOPHIEU-N[index]
                    </div>
                    <p style="margin-top: 10px; font-size: 0.95em;">
                        M√£ qu·∫£n l√Ω l√† unique identifier cho t·ª´ng thi·∫øt b·ªã trong phi·∫øu
                    </p>
                </div>
                
                <div class="info-box info-box-blue">
                    <h3 style="margin-bottom: 15px; color: #1976d2;">üìå Sinh m√£ h·ªì s∆° (hoso)</h3>
                    <div class="code-block">
$hoso = "$donvi-$sohoso-$thietbi[$i]-$somay[$i]";<br>
// V√≠ d·ª•: XDT-0126-PM001-SN12345<br>
// Format: MADV-SOPHIEU-MAVT-SOMAY
                    </div>
                </div>
            </section>
            
            <!-- Validation Rules -->
            <section class="section">
                <h2 class="section-title"><span class="icon">‚úÖ</span> Quy T·∫Øc Ki·ªÉm Tra (Validation)</h2>
                
                <div class="validation-rules">
                    <h3 style="color: #ff9800; margin-bottom: 15px;">üîç C√°c ki·ªÉm tra b·∫Øt bu·ªôc:</h3>
                    <ol style="list-style-position: inside; line-height: 2.2;">
                        <li>
                            <strong>Ki·ªÉm tra s·ªë phi·∫øu tr√πng:</strong>
                            <div class="code-block" style="margin: 10px 0;">
SELECT phieu FROM hososcbd_iso WHERE phieu='$sohoso';<br>
if (found) ‚Üí Cho ph√©p s·ª≠a (UPDATE)<br>
else ‚Üí T·∫°o m·ªõi (INSERT)
                            </div>
                        </li>
                        <li>
                            <strong>Ki·ªÉm tra thi·∫øt b·ªã ƒëang c√≥ ƒë∆°n h√†ng:</strong>
                            <div class="code-block" style="margin: 10px 0;">
SELECT bg FROM hososcbd_iso<br>
WHERE mavt='$mavt' AND somay='$somay';<br>
<br>
if (bg == 0) ‚Üí Thi·∫øt b·ªã ch∆∞a b√†n giao ‚Üí REJECT<br>
if (bg == 1 OR not found) ‚Üí ACCEPT
                            </div>
                            <p style="margin-top: 10px; color: #d32f2f;">
                                ‚ö†Ô∏è NgƒÉn ch·∫∑n t·∫°o nhi·ªÅu phi·∫øu cho c√πng 1 thi·∫øt b·ªã ch∆∞a ho√†n th√†nh
                            </p>
                        </li>
                        <li>
                            <strong>Ki·ªÉm tra ƒë∆°n v·ªã:</strong> madv ph·∫£i t·ªìn t·∫°i trong b·∫£ng donvi_iso
                        </li>
                        <li>
                            <strong>Ki·ªÉm tra v·ªã tr√≠:</strong> mavitri ph·∫£i t·ªìn t·∫°i trong b·∫£ng vitri_iso
                        </li>
                        <li>
                            <strong>Ki·ªÉm tra thi·∫øt b·ªã:</strong> B·ªô (mavt, somay, model) ph·∫£i t·ªìn t·∫°i trong thietbi_iso
                        </li>
                    </ol>
                </div>
            </section>
            
            <!-- Insert Logic -->
            <section class="section">
                <h2 class="section-title"><span class="icon">üíæ</span> Logic L∆∞u D·ªØ Li·ªáu</h2>
                
                <div class="info-box">
                    <h3 style="margin-bottom: 15px; color: #f5576c;">üìä V√≤ng l·∫∑p x·ª≠ l√Ω 5 thi·∫øt b·ªã</h3>
                    <div class="code-block">
for ($i = 1; $i <= 5; $i++) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;if ($thietbi[$i] != NULL) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// T√°ch mavt v√† model t·ª´ "mavt.model"<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$p = stripos($tb[$i], ".");<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$thietbi[$i] = substr($tb[$i], 0, $p);<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$model[$i] = substr($tb[$i], $p+1);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Check bg (validation)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (bg == 0) EXIT("Thi·∫øt b·ªã ch∆∞a ho√†n th√†nh");<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Sinh m√£<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$maql = "{$nams}{$thangs}{$ngays}-{$donvi}-{$sohoso}-N{$i}";<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$hoso = "{$donvi}-{$sohoso}-{$thietbi[$i]}-{$somay[$i]}";<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// INSERT v√†o hososcbd_iso<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INSERT INTO hososcbd_iso (...) VALUES (...);<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Log l·ªãch s·ª≠<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INSERT INTO lichsudn_iso (username, curdate, ip_address, maql);<br>
&nbsp;&nbsp;&nbsp;&nbsp;}<br>
}
                    </div>
                </div>
                
                <div class="feature-grid" style="margin-top: 25px;">
                    <div class="feature-card">
                        <h4>üìã B·∫£ng ch√≠nh</h4>
                        <p><strong>hososcbd_iso:</strong><br>
                        L∆∞u th√¥ng tin chi ti·∫øt t·ª´ng thi·∫øt b·ªã trong phi·∫øu</p>
                    </div>
                    <div class="feature-card">
                        <h4>üìù B·∫£ng ph·ª•</h4>
                        <p><strong>lichsudn_iso:</strong><br>
                        Log ng∆∞·ªùi t·∫°o, th·ªùi gian, IP, m√£ phi·∫øu</p>
                    </div>
                    <div class="feature-card">
                        <h4>üîó B·∫£ng li√™n k·∫øt</h4>
                        <p>thietbi_iso, donvi_iso, vitri_iso, lo_iso, mo_iso</p>
                    </div>
                    <div class="feature-card">
                        <h4>‚ö° Gi√° tr·ªã m·∫∑c ƒë·ªãnh</h4>
                        <p>bg=0, ngaykt=NULL, nhomsc='', slbg=NULL</p>
                    </div>
                </div>
            </section>
            
            <!-- Mapping Fields -->
            <section class="section">
                <h2 class="section-title"><span class="icon">üîÑ</span> Mapping Form ‚Üí Database</h2>
                
                <table>
                    <thead>
                        <tr>
                            <th style="width: 25%;">Tr∆∞·ªùng Form</th>
                            <th style="width: 25%;">Tr∆∞·ªùng Database</th>
                            <th style="width: 50%;">M√¥ t·∫£</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>sohoso</code></td>
                            <td><code>phieu</code></td>
                            <td>S·ªë phi·∫øu y√™u c·∫ßu (4 ch·ªØ s·ªë)</td>
                        </tr>
                        <tr>
                            <td><code>ngay</code></td>
                            <td><code>ngayyc</code></td>
                            <td>Ng√†y y√™u c·∫ßu (format: d/m/Y ‚Üí Y-m-d)</td>
                        </tr>
                        <tr>
                            <td><code>donvi</code></td>
                            <td><code>madv</code></td>
                            <td>M√£ ƒë∆°n v·ªã y√™u c·∫ßu</td>
                        </tr>
                        <tr>
                            <td><code>khachhang</code></td>
                            <td><code>ngyeucau</code></td>
                            <td>Ng∆∞·ªùi y√™u c·∫ßu (t√™n kh√°ch h√†ng)</td>
                        </tr>
                        <tr>
                            <td><code>nhanvien</code></td>
                            <td><code>ngnhyeucau</code></td>
                            <td>Nh√¢n vi√™n ti·∫øp nh·∫≠n</td>
                        </tr>
                        <tr>
                            <td><code>thietbi[i]</code></td>
                            <td><code>mavt</code></td>
                            <td>M√£ v·∫≠t t∆∞ (t√°ch t·ª´ "mavt.model")</td>
                        </tr>
                        <tr>
                            <td><code>somay[i]</code></td>
                            <td><code>somay</code></td>
                            <td>Serial number thi·∫øt b·ªã</td>
                        </tr>
                        <tr>
                            <td><code>model[i]</code></td>
                            <td><code>model</code></td>
                            <td>Model thi·∫øt b·ªã (t√°ch t·ª´ "mavt.model")</td>
                        </tr>
                        <tr>
                            <td><code>tinhtrang[i]</code></td>
                            <td><code>ttktbefore</code></td>
                            <td>T√¨nh tr·∫°ng k·ªπ thu·∫≠t tr∆∞·ªõc s·ª≠a ch·ªØa</td>
                        </tr>
                        <tr>
                            <td><code>yeucau[i]</code></td>
                            <td><code>cv</code></td>
                            <td>C√¥ng vi·ªác/N·ªôi dung y√™u c·∫ßu</td>
                        </tr>
                        <tr>
                            <td><code>vitri[i]</code></td>
                            <td><code>vitrimaybd</code></td>
                            <td>V·ªã tr√≠ m√°y v·ªÅ x∆∞·ªüng b·∫£o d∆∞·ª°ng</td>
                        </tr>
                        <tr>
                            <td><code>ycthemkh</code></td>
                            <td><code>ycthemkh</code></td>
                            <td>Y√™u c·∫ßu th√™m t·ª´ kh√°ch h√†ng</td>
                        </tr>
                        <tr>
                            <td><code>xemxetxuong</code></td>
                            <td><code>xemxetxuong</code></td>
                            <td>Xem x√©t/Nh·∫≠n x√©t c·ªßa x∆∞·ªüng</td>
                        </tr>
                        <tr>
                            <td><code>lo, mo, gieng</code></td>
                            <td><code>lo, mo, gieng</code></td>
                            <td>Th√¥ng tin v·ªã tr√≠ gi·∫øng khoan</td>
                        </tr>
                        <tr>
                            <td><em>(Auto-generated)</em></td>
                            <td><code>maql</code></td>
                            <td>M√£ qu·∫£n l√Ω: YYYYMMDD-MADV-PHIEU-Ni</td>
                        </tr>
                        <tr>
                            <td><em>(Auto-generated)</em></td>
                            <td><code>hoso</code></td>
                            <td>M√£ h·ªì s∆°: MADV-PHIEU-MAVT-SOMAY</td>
                        </tr>
                    </tbody>
                </table>
            </section>
            
            <!-- Use Cases -->
            <section class="section">
                <h2 class="section-title"><span class="icon">üí°</span> C√°c T√¨nh Hu·ªëng S·ª≠ D·ª•ng</h2>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>üì• T√¨nh hu·ªëng 1: T·∫°o phi·∫øu m·ªõi</h4>
                        <ul style="list-style-position: inside; line-height: 2;">
                            <li>Kh√°ch h√†ng g·ªçi y√™u c·∫ßu s·ª≠a m√°y</li>
                            <li>NV x∆∞·ªüng ƒëi·ªÅn form</li>
                            <li>Ch·ªçn thi·∫øt b·ªã t·ª´ dropdown</li>
                            <li>H·ªá th·ªëng sinh s·ªë phi·∫øu t·ª± ƒë·ªông</li>
                            <li>L∆∞u v√†o DB ‚Üí T·∫°o h·ªì s∆° m·ªõi</li>
                        </ul>
                    </div>
                    
                    <div class="feature-card">
                        <h4>‚úèÔ∏è T√¨nh hu·ªëng 2: S·ª≠a phi·∫øu ƒë√£ t·∫°o</h4>
                        <ul style="list-style-position: inside; line-height: 2;">
                            <li>Ph√°t hi·ªán sai th√¥ng tin</li>
                            <li>Nh·∫≠p l·∫°i s·ªë phi·∫øu c≈©</li>
                            <li>H·ªá th·ªëng detect tr√πng ‚Üí UPDATE</li>
                            <li>C√≥ th·ªÉ th√™m/b·ªõt thi·∫øt b·ªã</li>
                            <li>Log l·ªãch s·ª≠ thay ƒë·ªïi</li>
                        </ul>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üö´ T√¨nh hu·ªëng 3: T·ª´ ch·ªëi t·∫°o phi·∫øu</h4>
                        <ul style="list-style-position: inside; line-height: 2;">
                            <li>Thi·∫øt b·ªã c√≥ bg=0 (ch∆∞a b√†n giao)</li>
                            <li>Hi·ªÉn th·ªã c·∫£nh b√°o ƒë·ªè</li>
                            <li>Exit ngay l·∫≠p t·ª©c</li>
                            <li>Ng∆∞·ªùi d√πng ph·∫£i ki·ªÉm tra l·∫°i</li>
                            <li>ƒê·∫£m b·∫£o kh√¥ng tr√πng ƒë∆°n h√†ng</li>
                        </ul>
                    </div>
                    
                    <div class="feature-card">
                        <h4>‚ûï T√¨nh hu·ªëng 4: Th√™m ƒë∆°n v·ªã m·ªõi</h4>
                        <ul style="list-style-position: inside; line-height: 2;">
                            <li>Ch·ªçn "Th√™m m·ªõi" ·ªü dropdown</li>
                            <li>Popup nh·∫≠p madv, tendv</li>
                            <li>INSERT v√†o donvi_iso</li>
                            <li>Reload form</li>
                            <li>ƒê∆°n v·ªã m·ªõi xu·∫•t hi·ªán trong list</li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <!-- Best Practices -->
            <section class="section">
                <h2 class="section-title"><span class="icon">‚≠ê</span> Best Practices & L∆∞u √ù</h2>
                
                <div class="info-box info-box-green">
                    <h3 style="margin-bottom: 15px; color: #2e7d32;">‚úÖ N√™n l√†m:</h3>
                    <ul class="checklist">
                        <li>Ki·ªÉm tra k·ªπ s·ªë phi·∫øu tr∆∞·ªõc khi submit</li>
                        <li>ƒêi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin t√¨nh tr·∫°ng thi·∫øt b·ªã</li>
                        <li>Nh·∫≠p ch√≠nh x√°c s·ªë m√°y (serial number)</li>
                        <li>Ghi r√µ v·ªã tr√≠ m√°y v·ªÅ x∆∞·ªüng</li>
                        <li>ƒêi·ªÅn SƒêT ƒë·ªÉ li√™n h·ªá khi c·∫ßn</li>
                    </ul>
                </div>
                
                <div class="validation-rules">
                    <h3 style="color: #d32f2f; margin-bottom: 15px;">‚ùå Tr√°nh:</h3>
                    <ol style="list-style-position: inside; line-height: 2.2;">
                        <li>T·∫°o nhi·ªÅu phi·∫øu cho c√πng thi·∫øt b·ªã ch∆∞a ho√†n th√†nh</li>
                        <li>ƒê·ªÉ tr·ªëng tr∆∞·ªùng b·∫Øt bu·ªôc (khachhang, nhanvien)</li>
                        <li>Ch·ªçn sai ƒë∆°n v·ªã ‚Üí Dropdown thi·∫øt b·ªã s·∫Ω sai</li>
                        <li>Nh·∫≠p sai format ng√†y (ph·∫£i dd/mm/yyyy)</li>
                        <li>Kh√¥ng ki·ªÉm tra l·∫°i tr∆∞·ªõc khi l∆∞u</li>
                    </ol>
                </div>
            </section>
            
            <!-- K·∫øt n·ªëi v·ªõi ch·ª©c nƒÉng kh√°c -->
            <section class="section">
                <h2 class="section-title"><span class="icon">üîó</span> K·∫øt N·ªëi V·ªõi C√°c Ch·ª©c NƒÉng Kh√°c</h2>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>‚û°Ô∏è Ti·∫øp theo: Ph√¢n c√¥ng</h4>
                        <p>Sau khi t·∫°o phi·∫øu ‚Üí Admin ph√¢n c√¥ng nh√≥m s·ª≠a ch·ªØa (nhomsc: CNC, KTKT, TH...)</p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>‚û°Ô∏è Ti·∫øp theo: Th·ª±c hi·ªán</h4>
                        <p>Nh√≥m SC ƒëi·ªÅn th√¥ng tin: ngayth, honghoc, khacphuc, ttktafter</p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>‚û°Ô∏è Ti·∫øp theo: Ho√†n th√†nh</h4>
                        <p>C·∫≠p nh·∫≠t ngaykt ‚Üí S·∫µn s√†ng b√†n giao</p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>‚û°Ô∏è Cu·ªëi c√πng: B√†n giao</h4>
                        <p>ƒê√°nh d·∫•u bg=1 ‚Üí Phi·∫øu ƒë√≥ng ‚Üí In phi·∫øu b√†n giao</p>
                    </div>
                </div>
            </section>
            
            <!-- Technical Details -->
            <section class="section">
                <h2 class="section-title"><span class="icon">üîß</span> Chi Ti·∫øt K·ªπ Thu·∫≠t</h2>
                
                <div class="info-box">
                    <h3 style="margin-bottom: 15px;">üìã Request Parameters</h3>
                    <div class="code-block">
POST: formsc.php<br>
Parameters:<br>
&nbsp;&nbsp;nhap = "nhapphieudichvu"<br>
&nbsp;&nbsp;sohoso = "0126"<br>
&nbsp;&nbsp;ngay = "21/11/2025"<br>
&nbsp;&nbsp;donvi = "XDT"<br>
&nbsp;&nbsp;khachhang = "Nguy·ªÖn VƒÉn A"<br>
&nbsp;&nbsp;dienthoai = "0912345678"<br>
&nbsp;&nbsp;nhanvien = "Tr·∫ßn VƒÉn B"<br>
&nbsp;&nbsp;thietbi1 = "PM-001.Model-X"<br>
&nbsp;&nbsp;somay1 = "SN123456"<br>
&nbsp;&nbsp;tinhtrang1 = "H·ªèng ƒë·ªông c∆°"<br>
&nbsp;&nbsp;yeucau1 = "S·ª≠a ch·ªØa ƒë·ªông c∆°"<br>
&nbsp;&nbsp;vitri1 = "GG-01"<br>
&nbsp;&nbsp;...(repeat for thietbi2-5)<br>
&nbsp;&nbsp;ycthemkh = "G·∫•p, ∆∞u ti√™n"<br>
&nbsp;&nbsp;xemxetxuong = "OK, ti·∫øp nh·∫≠n"<br>
&nbsp;&nbsp;lo = "15-1"<br>
&nbsp;&nbsp;mo = "BK"<br>
&nbsp;&nbsp;gieng = "BK-01"
                    </div>
                </div>
                
                <div class="feature-grid" style="margin-top: 25px;">
                    <div class="feature-card">
                        <h4>üîê Security</h4>
                        <p>‚Ä¢ mysqli_real_escape_string()<br>
                        ‚Ä¢ Session validation<br>
                        ‚Ä¢ IP address logging</p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>‚ö° Performance</h4>
                        <p>‚Ä¢ Single transaction<br>
                        ‚Ä¢ Batch insert (loop 5)<br>
                        ‚Ä¢ Index on phieu, maql</p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üé® UI/UX</h4>
                        <p>‚Ä¢ Auto-complete dropdown<br>
                        ‚Ä¢ Date picker calendar<br>
                        ‚Ä¢ Color-coded inputs</p>
                    </div>
                    
                    <div class="feature-card">
                        <h4>üìä Tracking</h4>
                        <p>‚Ä¢ lichsudn_iso logging<br>
                        ‚Ä¢ User audit trail<br>
                        ‚Ä¢ Timestamp everything</p>
                    </div>
                </div>
            </section>
        </div>
        
        <div class="footer">
            <p style="font-size: 1.1em; margin-bottom: 10px;">¬© 2025 H·ªá th·ªëng Qu·∫£n l√Ω S·ª≠a ch·ªØa & B·∫£o d∆∞·ª°ng Thi·∫øt b·ªã</p>
            <p style="font-size: 0.95em;"><strong>Module:</strong> NH·∫¨P PHI·∫æU Y√äU C·∫¶U D·ªäCH V·ª§ | <strong>File:</strong> formsc.php</p>
            <p style="margin-top: 10px; font-size: 0.9em; color: #888;">
                Ch·ª©c nƒÉng ƒë·∫ßu v√†o c·ªßa quy tr√¨nh s·ª≠a ch·ªØa/b·∫£o d∆∞·ª°ng thi·∫øt b·ªã
            </p>
        </div>
    </div>
</body>
</html>
